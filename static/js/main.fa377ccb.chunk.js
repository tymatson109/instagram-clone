(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{52:function(e,t,a){},53:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(16),c=a.n(n),s=a(12),r=a(2),o=(a(52),a(87)),i=(a(53),a(23)),l=i.a.initializeApp({apiKey:"AIzaSyCf7Vveiki7QioCNC69Mh5Yl9OTX95jowQ",authDomain:"instagram-clone-9208c.firebaseapp.com",projectId:"instagram-clone-9208c",storageBucket:"instagram-clone-9208c.appspot.com",messagingSenderId:"19115656884",appId:"1:19115656884:web:62eca8c89b9ec6ec42b9e1",measurementId:"G-VL37FVYD3M"}).firestore(),u=i.a.auth(),p=i.a.storage(),j=a(5),m=function(e){var t=e.imageUrl,a=e.username,n=e.caption,c=e.postId,u=e.user,p=Object(r.useState)([]),m=Object(s.a)(p,2),d=m[0],b=m[1],g=Object(r.useState)(""),O=Object(s.a)(g,2),h=O[0],f=O[1];Object(r.useEffect)((function(){var e;return c&&(e=l.collection("posts").doc(c).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[c]);return Object(j.jsxs)("div",{className:"post",children:[Object(j.jsxs)("div",{className:"post__header",children:[Object(j.jsx)(o.a,{className:"post__avatar",alt:a,src:"/static/images/avatar/1.jpg"}),Object(j.jsx)("h3",{children:a})]}),Object(j.jsx)("img",{className:"post__image",src:t}),Object(j.jsxs)("h4",{className:"post__text",children:[Object(j.jsxs)("strong",{children:[a," "]}),n]}),Object(j.jsx)("div",{className:"post__comments",children:d.map((function(e){return Object(j.jsxs)("p",{children:[Object(j.jsxs)("strong",{children:[e.username," "]}),e.text]})}))}),u&&Object(j.jsxs)("form",{className:"post__commentBox",children:[Object(j.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:h,onChange:function(e){return f(e.currentTarget.value)}}),Object(j.jsx)("button",{className:"post__button",disabled:!h,type:"submit",onClick:function(e){e.preventDefault(),l.collection("posts").doc(c).collection("comments").add({text:h,username:u.displayName,timestamp:i.a.firestore.FieldValue.serverTimestamp()}),f("")},children:"Post"})]})]})},d=a(84),b=a(85),g=a(86),O=(a(62),function(e){var t=e.username,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1],u=Object(r.useState)(""),m=Object(s.a)(u,2),d=(m[0],m[1],Object(r.useState)(null)),b=Object(s.a)(d,2),O=b[0],h=b[1],f=Object(r.useState)(0),x=Object(s.a)(f,2),_=x[0],v=x[1];return Object(j.jsxs)("div",{className:"imageUpload",children:[Object(j.jsx)("progress",{value:_,className:"imageUpload__progress",max:"100"}),Object(j.jsx)("input",{type:"text",value:c,placeholder:"Enter caption...",onChange:function(e){return o(e.currentTarget.value)}}),Object(j.jsx)("input",{type:"file",onChange:function(e){e.currentTarget.files[0]&&h(e.currentTarget.files[0])}}),Object(j.jsx)(g.a,{className:"imageupload__button",onClick:function(e){p.ref("images/".concat(O.name)).put(O).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e),alert(e.message)}),(function(){p.ref("images").child(O.name).getDownloadURL().then((function(e){l.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:c,imageUrl:e,username:t}),v(0),o(""),h(null)}))}))},children:"Upload"})]})});function h(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var f=Object(d.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),x=function(){var e=f(),t=Object(r.useState)(h),a=Object(s.a)(t,1)[0],n=Object(r.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1],p=Object(r.useState)(!1),d=Object(s.a)(p,2),x=d[0],_=d[1],v=Object(r.useState)(!1),N=Object(s.a)(v,2),y=N[0],S=N[1],w=Object(r.useState)(""),C=Object(s.a)(w,2),I=C[0],k=C[1],T=Object(r.useState)(""),U=Object(s.a)(T,2),A=U[0],D=U[1],E=Object(r.useState)(""),L=Object(s.a)(E,2),B=L[0],M=L[1],V=Object(r.useState)(null),P=Object(s.a)(V,2),F=P[0],z=P[1];Object(r.useEffect)((function(){var e=u.onAuthStateChanged((function(t){return z(t||null),function(){e()}}))}),[F,B]),Object(r.useEffect)((function(){l.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){i(e.docs.map((function(e){return{post:e.data(),id:e.id}})))}))}),[]);return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("div",{className:"app__signInModal",children:Object(j.jsx)(b.a,{open:y,onClose:function(){return S(!1)},children:Object(j.jsx)("div",{style:a,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"})}),Object(j.jsx)("input",{placeholder:"email",type:"text",value:I,onChange:function(e){return k(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"password",type:"text",value:A,onChange:function(e){return D(e.currentTarget.value)}}),Object(j.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),S(!1),u.signInWithEmailAndPassword(I,A).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})})}),Object(j.jsx)("div",{className:"app__signUpModal",children:Object(j.jsx)(b.a,{open:x,onClose:function(){return _(!1)},children:Object(j.jsx)("div",{style:a,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"})}),Object(j.jsx)("input",{placeholder:"email",type:"text",value:I,onChange:function(e){return k(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"username",type:"text",value:B,onChange:function(e){return M(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"password",type:"text",value:A,onChange:function(e){return D(e.currentTarget.value)}}),Object(j.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),_(!1),u.createUserWithEmailAndPassword(I,A).then((function(e){return e.user.updateProfile({displayName:B})})).catch((function(e){return alert(e.message)}))},children:"Sign Up"})]})})})}),Object(j.jsxs)("div",{className:"app__header",children:[Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"}),F?Object(j.jsx)(g.a,{onClick:function(){return u.signOut()},children:"Log Out"}):Object(j.jsxs)("div",{className:"app__loginContainer",children:[Object(j.jsx)(g.a,{onClick:function(){return S(!0)},children:"Sign In"}),Object(j.jsx)(g.a,{onClick:function(){return _(!0)},children:"Sign Up"})]})]}),Object(j.jsxs)("div",{className:"app__posts",children:[Object(j.jsx)("div",{className:"app__postsLeft",children:o.map((function(e){var t=e.post,a=e.id;return Object(j.jsx)(m,{postId:a,user:F,caption:t.caption,username:t.username,imageUrl:t.imageUrl},a)}))}),Object(j.jsx)("div",{className:"app__postsRight"})]}),(null===F||void 0===F?void 0:F.displayName)?Object(j.jsx)(O,{username:F.displayName}):Object(j.jsx)("h3",{className:"app__notLogged",children:"Login to Upload"})]})};c.a.render(Object(j.jsx)(x,{}),document.querySelector("#root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.fa377ccb.chunk.js.map