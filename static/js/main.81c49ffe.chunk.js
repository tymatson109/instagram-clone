(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){},73:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(16),c=a.n(n),s=a(11),i=a(2),o=(a(63),a(100)),r=(a(64),a(25)),l=r.a.initializeApp({apiKey:"AIzaSyCf7Vveiki7QioCNC69Mh5Yl9OTX95jowQ",authDomain:"instagram-clone-9208c.firebaseapp.com",projectId:"instagram-clone-9208c",storageBucket:"instagram-clone-9208c.appspot.com",messagingSenderId:"19115656884",appId:"1:19115656884:web:62eca8c89b9ec6ec42b9e1",measurementId:"G-VL37FVYD3M"}).firestore(),p=r.a.auth(),u=r.a.storage(),j=a(4),d=function(e){var t=e.imageUrl,a=e.username,n=e.caption,c=e.postId,p=e.user,u=Object(i.useState)([]),d=Object(s.a)(u,2),m=d[0],b=d[1],h=Object(i.useState)(""),g=Object(s.a)(h,2),O=g[0],f=g[1];Object(i.useEffect)((function(){var e;return c&&(e=l.collection("posts").doc(c).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[c]);return Object(j.jsxs)("div",{className:"post",children:[Object(j.jsxs)("div",{className:"post__header",children:[Object(j.jsx)(o.a,{className:"post__avatar",alt:a,src:"/static/images/avatar/1.jpg"}),Object(j.jsx)("h3",{children:a})]}),Object(j.jsx)("img",{className:"post__image",src:t}),Object(j.jsxs)("h4",{className:"post__text",children:[Object(j.jsxs)("strong",{children:[a," "]}),n]}),Object(j.jsx)("div",{className:"post__comments",children:m.map((function(e){return Object(j.jsxs)("p",{children:[Object(j.jsxs)("strong",{children:[e.username," "]}),e.text]})}))}),p&&Object(j.jsxs)("form",{className:"post__commentBox",children:[Object(j.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:O,onChange:function(e){return f(e.currentTarget.value)}}),Object(j.jsx)("button",{className:"post__button",disabled:!O,type:"submit",onClick:function(e){e.preventDefault(),l.collection("posts").doc(c).collection("comments").add({text:O,username:p.displayName,timestamp:r.a.firestore.FieldValue.serverTimestamp()}),f("")},children:"Post"})]})]})},m=a(97),b=a(99),h=a(98),g=a(53),O=(a(73),function(e){var t=e.username,a=Object(i.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1],p=Object(i.useState)(""),d=Object(s.a)(p,2),m=(d[0],d[1],Object(i.useState)(null)),b=Object(s.a)(m,2),O=b[0],f=b[1],x=Object(i.useState)(0),_=Object(s.a)(x,2),v=_[0],w=_[1];return Object(j.jsxs)("div",{className:"imageUpload",children:[Object(j.jsx)("progress",Object(g.a)({value:v,className:"imageUpload__progress",max:"100"},"className","item")),Object(j.jsx)("input",{className:"item",type:"text",value:c,placeholder:"Enter caption...",onChange:function(e){return o(e.currentTarget.value)}}),Object(j.jsx)("input",{className:"item",type:"file",onChange:function(e){e.currentTarget.files[0]&&f(e.currentTarget.files[0])}}),Object(j.jsx)(h.a,{className:"imageupload__button item",onClick:function(e){u.ref("images/".concat(O.name)).put(O).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);w(t)}),(function(e){console.log(e),alert(e.message)}),(function(){u.ref("images").child(O.name).getDownloadURL().then((function(e){l.collection("posts").add({timestamp:r.a.firestore.FieldValue.serverTimestamp(),caption:c,imageUrl:e,username:t}),w(0),o(""),f(null)}))}))},children:"Upload"})]})}),f=function(e){var t=e.path,a=e.children,n=Object(i.useState)(window.location.pathname),c=Object(s.a)(n,2),o=c[0],r=c[1];return Object(i.useEffect)((function(){var e=function(){r(window.location.pathname)};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),o===t?a:null},x=a(54),_=a.n(x),v=a(55),w=a.n(v);function N(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var S=Object(m.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),y=function(){var e=S(),t=Object(i.useState)(N),a=Object(s.a)(t,1)[0],n=Object(i.useState)([]),c=Object(s.a)(n,2),o=c[0],r=c[1],u=Object(i.useState)(!1),m=Object(s.a)(u,2),g=m[0],x=m[1],v=Object(i.useState)(!1),y=Object(s.a)(v,2),C=y[0],I=y[1],k=Object(i.useState)(!1),E=Object(s.a)(k,2),T=E[0],U=E[1],M=Object(i.useState)(""),L=Object(s.a)(M,2),P=L[0],A=L[1],B=Object(i.useState)(""),D=Object(s.a)(B,2),V=D[0],F=D[1],z=Object(i.useState)(""),J=Object(s.a)(z,2),Q=J[0],R=J[1],W=Object(i.useState)(null),Y=Object(s.a)(W,2),q=Y[0],G=Y[1],K=Object(i.useState)(!1),X=Object(s.a)(K,2),H=X[0],Z=X[1];Object(i.useEffect)((function(){var e=p.onAuthStateChanged((function(t){return G(t||null),function(){e()}}))}),[q,Q]),Object(i.useEffect)((function(){l.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{post:e.data(),id:e.id}})))}))}),[]);Object(i.useEffect)((function(){!0===H?$():ee()}),[H]);var $=function(){window.history.pushState({},"","/profile");var e=new PopStateEvent("popstate");window.dispatchEvent(e)},ee=function(){window.history.pushState({},"","/"),console.log("hi");var e=new PopStateEvent("popstate");window.dispatchEvent(e)};return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("div",{className:"app__postModal",children:Object(j.jsx)(b.a,{open:C,onClose:function(){return I(!1)},children:Object(j.jsxs)("div",{style:a,className:e.paper,children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"})}),q&&Object(j.jsx)(O,{username:q.displayName})]})})}),Object(j.jsx)("div",{className:"app__signInModal",children:Object(j.jsx)(b.a,{open:T,onClose:function(){return U(!1)},children:Object(j.jsx)("div",{style:a,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"})}),Object(j.jsx)("input",{placeholder:"email",type:"text",value:P,onChange:function(e){return A(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"password",type:"text",value:V,onChange:function(e){return F(e.currentTarget.value)}}),Object(j.jsx)(h.a,{type:"submit",onClick:function(e){e.preventDefault(),U(!1),p.signInWithEmailAndPassword(P,V).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})})}),Object(j.jsx)("div",{className:"app__signUpModal",children:Object(j.jsx)(b.a,{open:g,onClose:function(){return x(!1)},children:Object(j.jsx)("div",{style:a,className:e.paper,children:Object(j.jsxs)("form",{className:"app__signup",children:[Object(j.jsx)("center",{children:Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"})}),Object(j.jsx)("input",{placeholder:"email",type:"text",value:P,onChange:function(e){return A(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"username",type:"text",value:Q,onChange:function(e){return R(e.currentTarget.value)}}),Object(j.jsx)("input",{placeholder:"password",type:"text",value:V,onChange:function(e){return F(e.currentTarget.value)}}),Object(j.jsx)(h.a,{type:"submit",onClick:function(e){e.preventDefault(),x(!1),p.createUserWithEmailAndPassword(P,V).then((function(e){return e.user.updateProfile({displayName:Q})})).catch((function(e){return alert(e.message)}))},children:"Sign Up"})]})})})}),Object(j.jsxs)("div",{className:"app__header",children:[Object(j.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram logo"}),q?Object(j.jsxs)("div",{className:"app__headerMenu",children:[Object(j.jsx)("button",{className:"app__headerMenuItem",onClick:function(){return p.signOut()},children:"Log Out"}),!0===H?Object(j.jsx)(_.a,{onClick:function(){return Z(!1)},className:"app__headerMenuItem"}):Object(j.jsx)(w.a,{onClick:function(){return Z(!0)},className:"app__headerMenuItem"})]}):Object(j.jsxs)("div",{className:"app__loginContainer",children:[Object(j.jsx)(h.a,{onClick:function(){return U(!0)},children:"Sign In"}),Object(j.jsx)(h.a,{onClick:function(){return x(!0)},children:"Sign Up"})]})]}),Object(j.jsxs)(f,{path:"/",children:[Object(j.jsxs)("div",{className:"app__posts",children:[Object(j.jsx)("div",{className:"app__postsLeft",children:o.map((function(e){var t=e.post,a=e.id;return Object(j.jsx)(d,{postId:a,user:q,caption:t.caption,username:t.username,imageUrl:t.imageUrl},a)}))}),Object(j.jsx)("div",{className:"app__postsRight"})]}),(null===q||void 0===q?void 0:q.displayName)?Object(j.jsx)("div",{className:"app__postButton",children:Object(j.jsx)(h.a,{onClick:function(){return I(!0)},children:"Post A Pic"})}):Object(j.jsx)("h3",{className:"app__notLogged",children:"Login to Upload"})]}),Object(j.jsx)(f,{path:"/profile",children:"hi"})]})};c.a.render(Object(j.jsx)(y,{}),document.querySelector("#root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.81c49ffe.chunk.js.map